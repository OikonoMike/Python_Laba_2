# Мини-оболочка с файловыми командами (Лабораторная работа №2 по Python)

## Описание
Данная работа представляет собой кроссплатформенную мини-оболочку в которой можно вводить файловые команды, такие как ls, cd, cat, rm, cp и mv.
### Архитектура работы
```
Python_Laba_2/
├── src/
│   ├── main.py                 # Главный исполняемый файл
│   ├── command_ls.py           # Команда ls - список файлов
│   ├── command_cat.py          # Команда cat - просмотр файлов
│   ├── command_rm.py           # Команда rm - удаление
│   ├── command_cd.py           # Команда cd - смена директории
│   ├── command_cp.py           # Команда cp - копирование
│   ├── command_mv.py           # Команда mv - перемещение
│   ├── DateTime.py             # Утилиты для работы с датой/временем
│   ├── logging_in_shell.py     # Система логирования
│   └── shell.log               # Файл логов (создается автоматически)
├── tests/                      # Тесты
│   ├── test_cat.py
│   ├── test_cd.py
│   ├── test_cp.py
│   ├── test_ls.py
│   ├── test_mv.py
│   ├── test_rm.py
│   ├── test_main.py
│   └── __init__.py
├── .gitignore
├── .pre-commit-config.yaml     # Настройки pre-commit хуков
├── pyproject.toml              # Конфигурация проекта
├── requirements.txt            # Зависимости проекта
└── README.md
```
### Допущения и ограничения
 - Команды должны вводиться через пробел
 - Поддерживаются как абсолютные, так и относительные пути
 - Работает на Windows, Linux и Mac OS
 - Для путей с пробелами используйте кавычки: cd "папка с пробелами" (для путей, в которых используются файлы/каталоги с пробелами)
 - Все операции логируются в файл src/shell.log

## Команды

#### 1) Команда ls - список файлов и каталогов

Опция:
`-l` - подробный вывод с правами доступа, размером файлов и датой изменения

##### Показ каталога: `ls [path] -l`
```
Пользовательский ввод: ls Каталог -l

Каталог:  C:\Users\user\Каталог

   Mode            LastWriteTime                Length       Name
  ------           -------------                ------     --------
-rw-r--r--     2025-15-10 10:30:00              1788    document.txt
drwxr-xr-x     2025-15-10 11:20:00                   Projects/
-rw-r--r--     2025-15-10 12:15:00              2007    data.csv

```
P.S Без опции `-l` просто выводится список из файлов и каталогов

##### Обработка ошибок:
```
ls несуществующая_папка
ERROR: Каталог несуществующая_папка не найден

ls -l extra_arg
ERROR: Неправильный формат ввода
```


#### 2) Команда cat - выводит содержимое файла
Формат ввода: `cat [file_path]`
##### Примеры использования
```
cat document.txt              # Просмотр содержимого файла
cat /home/user/readme.txt     # Абсолютный путь (Linux/Mac)
cat C:\Users\user\file.txt    # Абсолютный путь (Windows)
cat "файл с пробелами.txt"    # Файл с пробелами в имени
cat ~/requirements.txt        # Файл в домашней директории
```
##### Обработка ошибок
```
cat
ERROR: Имя файла не указано

cat несуществующий.txt
ERROR: Данного файла нет в этом каталоге

cat Documents/
ERROR: Невозможно открыть файл, так как он является каталогом

cat binary_file.exe
ERROR: Невозможно прочитать файл. Возможно этот файл является бинарным
```


#### 3) Команда rm - удаление файла/каталога
Формат ввода: `rm [-r] path`

Опция:
`-r` - рекурсивное удаление директорий (запрашивает подтверждение)

##### Пример работы команды rm
```
# Удаление файлов
rm file.txt
rm "file with spaces.txt"

# Рекурсивное удаление каталогов
rm -r folder/
rm -r "folder with spaces/"

# Абсолютные пути (Windows)
rm C:\Users\user\Documents\file.txt
rm -r C:\Projects\old_project

# Абсолютные пути (Linux/Mac)
rm /home/user/documents/file.txt
rm -r /var/www/old_site

# Относительные пути с переходом в другие директории
rm ../other_folder/file.txt
rm -r ../../old_projects

# С домашней директорией
rm ~/downloads/temp_file.txt
rm -r ~/old_backups
```

##### Виды ошибок, которые обрабатывает команда rm
```
rm /
ERROR: Нельзя удалять корневой каталог

rm ..
ERROR: Нельзя удалять родительский каталог  

rm .
ERROR: Нельзя удалять текущий каталог

rm ~
ERROR: Нельзя удалять домашнюю директорию

rm
ERROR: Не указан файл или каталог для удаления

rm -r
ERROR: Не указан каталог для рекурсивного удаления

rm -r [ФАЙЛ]
ERROR: ФАЙЛ является каталогом. Для удаления каталога используйте -r

rm -r [несуществующий_файл]
ERROR: В каталоге нет файла несуществующий_файл

```
##### Подтверждение рекурсивного удаления каталога:
```
Подтверждение
Элемент в "Каталог" имеет дочерние объекты. При продолжении все дочерние объекты будут удалены вместе с элементом. Вы действительно хотите продолжить?
[Y] Да - Y [N] Нет - N [?] Справка (значением по умолчанию является "Y"):
```


#### 4) Команда cd - смена текущего каталога
Формат: `cd [dir_path]`

Специальные пути:

`.` - текущая директория

`..` - родительская директория

`~` - домашняя директория пользователя
##### Примеры использования
```
cd Documents              # Переход в папку Documents
cd /home/user/Projects    # Абсолютный путь (Linux/Mac)
cd C:\Users\user\Desktop  # Абсолютный путь (Windows)
cd ..                     # Переход в родительскую директорию
cd ~                      # Переход в домашнюю директорию
cd .                      # Остаться в текущей директории
cd "папка с пробелами"    # Путь с пробелами в имени
```
##### Обработка ошибок
```
cd
ERROR: Путь не указан

cd несуществующая_папка
ERROR: Каталог несуществующая_папка не найден

cd file.txt
ERROR: Каталог file.txt не найден

cd ......
ERROR: Каталог ...... не найден
```


#### 5) Команда cp - копирование файлов и каталогов
Формат ввода: `cp [source file/directory] [destination file/directory]`

Опция:
`-r` - рекурсивное копирование директории

##### Примеры использования
```
# Копирование файлов
cp file.txt backup.txt
cp "file with spaces.txt" "backup file.txt"
cp file.txt /backup/folder/

# Рекурсивное копирование каталогов  
cp -r folder backup_folder
cp -r "source folder" "destination folder"

# Абсолютные пути (Windows)
cp C:\Users\user\file.txt C:\Backup\
cp -r C:\Projects\old_project C:\Backup\

# Абсолютные пути (Linux/Mac)
cp /home/user/file.txt /backup/
cp -r /var/www/old_site /backup/
```
##### Обработка ошибок
```
cp file.txt file.txt
ERROR: Невозможно скопировать файл в самого себя

cp несуществующий.txt копия.txt
ERROR: Файл несуществующий.txt не найдено

cp папка/ копия/
ERROR: Для копирования каталога нужно использовать опцию -r

cp -r файл.txt копия/
ERROR: Опция -r поддерживается только для копирования каталогов

cp file.txt
ERROR: Неправильный формат ввода

cp -r source_dir
ERROR: Не указан источник и/или каталог для рекурсивного копирования
```


#### 6) Команда mv - перемещение и переименование файлов и каталогов
Формат ввода: `mv [source] [destination]`
##### Примеры использования
```
# Переименование файла
mv old_name.txt new_name.txt

# Перемещение файла в другую директорию
mv file.txt /target/folder/
mv file.txt /target/folder/new_name.txt

# Перемещение директории
mv old_folder/ new_folder/
mv folder/ /target/path/

# Работа с путями, содержащими пробелы
mv "old file.txt" "new file.txt"
mv "source folder" "/target path/"

# Абсолютные пути
mv /home/user/old.txt /home/user/new.txt
```
##### Обработка ошибок
```
mv несуществующий.txt цель.txt
ERROR: Источник несуществующий.txt не найден

mv файл.txt файл.txt
ERROR: Невозможно переместить файл в самого себя

mv file.txt
ERROR: Неправильный формат ввода
```

### Особенности работы кода:
##### Логирование операций:
Все выполняемые команды и возникающие ошибки автоматически записываются в файл src/shell.log

##### Как shell.log выглядит изнутри:
```
[2025-15-10 10:30:00] ls -l
[2025-15-10 10:30:00] INFO: The request was executed correctly
[2025-15-10 10:30:30] cd несуществующая_папка
[2025-15-10 10:30:30] ERROR: Каталог несуществующая_папка не найден
```

### Для запуска моей программы необходимо (в командной строке) прописать:
 1) git clone https://github.com/OikonoMike/Python_Laba_2
 2) Далее (Вариант 1):
    ```
    1) cd Python_Laba_2
    2) cd src
    ```
 3) Либо (Вариант 2):
 ```Python3 -m src.main```

### Для выхода из программы (её завершения) необходимо:
 - либо нажать сочетание клавиш `Ctrl + C`
 - либо ввести команду `exit`